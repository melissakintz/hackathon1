{% extends 'layout.html.twig' %}

{% block content %}

    <div class="uk-padding-large uk-background-muted">

        <h1 class="uk-text-center uk-padding-remove-bottom">Présentation du rover</h1>
        {% for rover in rovers %}
            <div class=" uk-grid-match  uk-grid-match uk-flex-center" uk-grid>
                <div class="uk-card uk-card-default uk-card-body uk-width-1-3@m">
                    <h3 class="uk-card-title">{{rover.name}} - {{rover.status}}</h3>
                    {% if name == 'curiosity' %}
                        <img src="{{roverImages.collection.items.36.links.0.href}}">
                    {% elseif name == 'spirit' %}
                        <img src="{{roverImages.collection.items.16.links.0.href}}">
                    {% elseif name == 'opportunity' %}
                        <img src="{{roverImages.collection.items.18.links.0.href}}">
                    {% endif %}
                    <p>Lancé à la date de {{rover.launch_date}}, {{rover.name}} a atteint mars le {{rover.landing_date}}. </p><br>
                    <p>Cela fait {{rover.max_sol}} jour qu'il roule sur mars, pour un total de {{rover.total_photos}} photos prises. </p>
                </div>
            </div>
            {% endfor %}

        <h1 class="uk-text-center uk-padding-remove-bottom">Photos liées au rover</h1>
        <div class="uk-position-relative uk-visible-toggle uk-light uk-padding-large" tabindex="-1" uk-slider>
            <ul class="uk-slider-items uk-child-width-1-2 uk-child-width-1-3@s uk-child-width-1-4@m">
                {% for rover in roverImages.collection.items|slice(0,20) %}
                    <li>
                        <div class="uk-position-middle">
                            <img src="{{rover.links.0.href}}" alt="" width="400">

                        </div>
                        <div class="uk-overlay uk-overlay-primary uk-position-bottom">
                            <p class="uk-margin-remove">{{ rover.data.0.title }}</p>
                        </div>
                    </li>
                {% endfor %}
            </ul>

            <a class="uk-position-center-left uk-position-small uk-hidden-hover" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
            <a class="uk-position-center-right uk-position-small uk-hidden-hover" href="#" uk-slidenav-next uk-slider-item="next"></a>
        </div>
<hr/>

        <form method="POST" class=" uk-flex-inline ">
            <input class ="uk-number uk-form-medium uk-width-auto" type="number" id="sol" name="sol"
                   min="0" max="1000">

            <select class="uk-select uk-form-medium uk-width-auto" name="roover">
                <option selected disabled>---Choisir un rover---</option>
                <option value="Curiosity">Curiosity</option>
                <option value="Opportunity">Opportunity</option>
                <option value="Spirit">Spirit</option>
            </select>

            <select class="uk-select uk-form-medium uk-width-auto" name="cam">
                <option selected disabled>---Choisir une caméra---</option>
                <option value="navcam">Nav Camera</option>
                <option value="fhaz">Front Camera</option>
                <option value="rhaz">Back Camera</option>
            </select>

            <input class="uk-input uk-form-medium uk-width-auto" type="submit" value="chercher">
        </form>

        {% for picture in pictures %}
            <!-- affiche une image au hasard -->
            <div class=" uk-grid-match  uk-grid-match uk-flex-center" uk-grid>
                <div class="uk-card uk-card-default uk-card-body uk-width-1-3@m">
                    <h3 class="uk-card-title">Picture of {{picture.0.rover.name}}</h3>
                    <img class="uk-card-media" src="{{picture[random(picture|length -1)]['img_src']}}" width="300" height="300" alt="">
                    <p>Picture took with the {{picture.0.camera.full_name}} at {{picture.0.earth_date}}</p>
                </div><br>
                <div class="uk-card uk-card-default uk-card-body uk-width-1-3@m ">
                    <h3 class="uk-card-title">Picture of {{picture.0.rover.name}}</h3>
                    <img class="uk-card-media" src="{{picture[random(picture|length -1)]['img_src']}}" width="300" height="300" alt="">
                    <p>Picture took with the {{picture.0.camera.full_name}} at {{picture.0.earth_date}}</p>
                </div>
            </div>
            <hr>
            <!-- affiche toutes les images -->
            <div class="uk-child-width-1-4@m uk-child-width-1-5@l uk-child-width-1-2@s uk-grid-match" uk-grid>
                {% for pic in picture|slice(0,20) %}
                    <div class="uk-card uk-card-default uk-card-body">
                        <h3 class="uk-card-title">Picture of {{pic.rover.name}}</h3>
                        <img class="uk-card-media" src="{{pic.img_src}}" width="300" height="300" alt="">
                        <p>Picture took with the {{pic.camera.full_name}} at {{pic.earth_date}}</p>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div>
    
{% endblock %}
